<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>ğŸ„ Suraj, You've Been Summoned ğŸ„</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800;900&family=Permanent+Marker&family=Mountains+of+Christmas:wght@700&family=Press+Start+2P&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root {
            --rage-red: #D72638;
            --grinch-green: #4CB944;
            --dark-green: #2D5A27;
            --paper-cream: #FFF8DC;
            --envelope-red: #C41E3A;
            --gold: #FFD700;
            --neon-pink: #ff006e;
            --neon-blue: #00f5ff;
            --slack-purple: #611f69;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { 
            -webkit-text-size-adjust: 100%;
            -webkit-overflow-scrolling: touch;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: #000;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
            overscroll-behavior: none;
            position: fixed;
            width: 100%;
            height: 100%;
        }
        
        @supports (padding: max(0px)) {
            .scene {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }
        }
        
        html, body {
            overscroll-behavior-y: none;
            -webkit-overflow-scrolling: touch;
        }
        
        .scene, .gift-box-3d, .card, .booking-card, .confetti, .snowflake {
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TRANSMISSION LOAD SCREEN
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .transmission-loader {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #000;
            z-index: 99999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            animation: transmissionFadeOut 0.5s ease-out 3s forwards;
        }
        
        .transmission-loader.hidden { display: none; }
        
        .transmission-text {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.6rem;
            color: var(--rage-red);
            text-transform: uppercase;
            letter-spacing: 3px;
            animation: transmissionFlicker 0.15s infinite;
        }
        
        .transmission-bar {
            width: 200px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            margin-top: 20px;
            overflow: hidden;
        }
        
        .transmission-progress {
            height: 100%;
            background: var(--rage-red);
            box-shadow: 0 0 10px var(--rage-red);
            animation: transmissionLoad 2.5s ease-out forwards;
        }
        
        @keyframes transmissionFlicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        @keyframes transmissionLoad {
            0% { width: 0%; }
            20% { width: 15%; }
            40% { width: 35%; }
            60% { width: 60%; }
            80% { width: 85%; }
            100% { width: 100%; }
        }
        
        @keyframes transmissionFadeOut {
            0% { opacity: 1; visibility: visible; }
            100% { opacity: 0; visibility: hidden; }
        }
        
        .static-overlay {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E");
            pointer-events: none;
            animation: staticMove 0.1s steps(2) infinite;
        }
        
        @keyframes staticMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(2px, 2px); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCENE TRANSITIONS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .scene {
            position: fixed;
            top: 0; left: 0;
            width: 100%; 
            height: 100%;
            height: -webkit-fill-available;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            overflow: hidden;
            -webkit-transform: translateZ(0);
        }
        
        .scene.active {
            opacity: 1;
            visibility: visible;
        }
        
        .scene.active .scene-enter {
            animation: sceneSlideUp 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        
        .scene.active .scene-enter-delay-1 { animation-delay: 0.1s; opacity: 0; }
        .scene.active .scene-enter-delay-2 { animation-delay: 0.2s; opacity: 0; }
        .scene.active .scene-enter-delay-3 { animation-delay: 0.3s; opacity: 0; }
        
        @keyframes sceneSlideUp {
            0% { opacity: 0; transform: translateY(40px) scale(0.95); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        @keyframes screenShake {
            0%, 100% { transform: translateX(0); }
            10% { transform: translateX(-5px) rotate(-0.5deg); }
            20% { transform: translateX(5px) rotate(0.5deg); }
            30% { transform: translateX(-5px); }
            40% { transform: translateX(5px); }
            50% { transform: translateX(-3px); }
            60% { transform: translateX(3px); }
        }
        
        .screen-shake { animation: screenShake 0.4s ease-out; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TAP RIPPLE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .tap-ripple {
            position: fixed;
            pointer-events: none;
            width: 20px; height: 20px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,215,0,0.4) 0%, transparent 70%);
            transform: translate(-50%, -50%) scale(0);
            animation: rippleExpand 0.5s ease-out forwards;
            z-index: 10001;
        }
        
        @keyframes rippleExpand {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(8); opacity: 0; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GLOBAL BACKGROUND
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .global-background {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(ellipse at center, #1a0a0a 0%, #0a0505 50%, #000 100%);
            z-index: -1;
        }
        
        .global-cyber-grid {
            position: absolute;
            width: 200%; height: 200%;
            top: -50%; left: -50%;
            background: 
                linear-gradient(90deg, rgba(255,0,0,0.03) 1px, transparent 1px),
                linear-gradient(0deg, rgba(255,0,0,0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: gridPan 30s linear infinite;
        }
        
        @keyframes gridPan {
            0% { transform: translate(0, 0); }
            100% { transform: translate(40px, 40px); }
        }
        
        .global-glow-orbs {
            position: absolute;
            width: 100%; height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .global-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            animation: orbFloat 8s ease-in-out infinite;
        }
        
        .global-orb.red { width: 300px; height: 300px; background: rgba(215, 38, 56, 0.25); top: 20%; left: 10%; }
        .global-orb.green { width: 250px; height: 250px; background: rgba(76, 185, 68, 0.15); bottom: 20%; right: 10%; animation-delay: -4s; }
        .global-orb.gold { width: 200px; height: 200px; background: rgba(255, 215, 0, 0.12); top: 50%; left: 50%; margin-left: -100px; margin-top: -100px; animation-delay: -2s; }
        
        @keyframes orbFloat {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(20px, -20px) scale(1.1); }
        }
        
        .global-heartbeat {
            position: absolute;
            width: 100%; height: 100%;
            background: radial-gradient(ellipse at center, rgba(215, 38, 56, 0.08) 0%, transparent 70%);
            animation: heartbeat 1.5s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes heartbeat {
            0%, 100% { opacity: 0; transform: scale(1); }
            25% { opacity: 0.3; transform: scale(1.02); }
            35% { opacity: 0.1; transform: scale(1); }
            45% { opacity: 0.2; transform: scale(1.01); }
            55% { opacity: 0; transform: scale(1); }
        }


        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCENE 1: INTRO
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        #scene-intro {
            background: transparent;
            cursor: pointer;
        }
        
        .heartbeat-overlay {
            position: absolute;
            width: 100%; height: 100%;
            background: radial-gradient(ellipse at center, rgba(215, 38, 56, 0.1) 0%, transparent 70%);
            opacity: 0;
            animation: heartbeat 1.5s ease-in-out infinite;
            pointer-events: none;
        }
        
        .cyber-grid {
            position: absolute;
            width: 200%; height: 200%;
            top: -50%; left: -50%;
            background: 
                linear-gradient(90deg, rgba(255,0,0,0.03) 1px, transparent 1px),
                linear-gradient(0deg, rgba(255,0,0,0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            opacity: 0;
            transition: opacity 2s ease;
            animation: gridPan 30s linear infinite;
        }
        
        .cyber-grid.revealed { opacity: 1; }
        
        .glow-orbs {
            position: absolute;
            width: 100%; height: 100%;
            overflow: hidden;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1.5s ease 0.5s;
        }
        
        .glow-orbs.revealed { opacity: 1; }
        
        .glow-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            animation: orbFloat 8s ease-in-out infinite;
        }
        
        .glow-orb.red { width: 300px; height: 300px; background: rgba(215, 38, 56, 0.3); top: 20%; left: 10%; }
        .glow-orb.green { width: 250px; height: 250px; background: rgba(76, 185, 68, 0.2); bottom: 20%; right: 10%; animation-delay: -4s; }
        .glow-orb.gold { width: 200px; height: 200px; background: rgba(255, 215, 0, 0.15); top: 50%; left: 50%; margin-left: -100px; margin-top: -100px; animation-delay: -2s; }
        
        .intro-content {
            opacity: 0;
            transition: opacity 0.8s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 100%;
            padding: 0 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .intro-content.revealed { opacity: 1; }
        
        .intro-decoration {
            font-size: 3rem;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(255,215,0,0.5));
            opacity: 0;
            text-align: center;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            transform: scale(0);
        }
        
        .intro-decoration.revealed {
            opacity: 1;
            transform: scale(1);
            animation: introReveal 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards, introSpin 3s ease-in-out 0.6s infinite;
        }
        
        @keyframes introReveal {
            0% { opacity: 0; transform: scale(0); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        @keyframes introSpin {
            0%, 100% { transform: rotate(-10deg) scale(1); }
            50% { transform: rotate(10deg) scale(1.1); }
        }
        
        .intro-subtitle {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.55rem;
            color: var(--rage-red);
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 0 0 10px var(--rage-red), 0 0 20px var(--rage-red);
            text-align: center;
            padding: 0 20px;
            line-height: 1.8;
            animation: textFlicker 4s infinite;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .intro-subtitle.revealed { opacity: 1; }
        
        @keyframes textFlicker {
            0%, 92%, 100% { opacity: 1; }
            93% { opacity: 0.7; }
            94% { opacity: 1; }
            95% { opacity: 0.8; }
        }
        
        .intro-name {
            font-family: 'Poppins', sans-serif;
            font-weight: 900;
            font-size: 4.5rem;
            color: var(--gold);
            text-shadow: 0 0 20px var(--gold), 0 0 40px var(--gold), 0 0 60px var(--gold), 4px 4px 0 var(--rage-red);
            margin: 10px 0 40px;
            letter-spacing: 4px;
            min-height: 80px;
            display: flex;
            justify-content: center;
        }
        
        .intro-name .letter {
            opacity: 0;
            transform: translateY(20px);
            display: inline-block;
            animation: none;
        }
        
        .intro-name .letter.typed {
            opacity: 1;
            transform: translateY(0);
            animation: letterGlitch 0.3s ease-out, namePulse 2s ease-in-out infinite, nameFloat 3s ease-in-out infinite;
        }
        
        .cursor {
            display: inline-block;
            width: 4px;
            height: 1em;
            background: var(--gold);
            margin-left: 5px;
            animation: cursorBlink 0.6s infinite;
            vertical-align: middle;
            box-shadow: 0 0 10px var(--gold);
        }
        
        .cursor.hidden { display: none; }
        
        @keyframes cursorBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        @keyframes letterGlitch {
            0% { opacity: 0; transform: translateY(20px) scaleY(0.5); filter: blur(10px); }
            50% { opacity: 1; transform: translateY(-5px) scaleY(1.2); filter: blur(2px); color: var(--neon-pink); }
            100% { opacity: 1; transform: translateY(0) scaleY(1); filter: blur(0); }
        }
        
        @keyframes namePulse {
            0%, 100% { text-shadow: 0 0 20px var(--gold), 0 0 40px var(--gold), 0 0 60px var(--gold), 4px 4px 0 var(--rage-red); }
            50% { text-shadow: 0 0 30px var(--gold), 0 0 60px var(--gold), 0 0 90px var(--gold), 4px 4px 0 var(--rage-red); }
        }
        
        @keyframes nameFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }
        
        .tap-begin {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.6rem;
            color: white;
            padding: 15px 25px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            background: rgba(255,255,255,0.05);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            text-align: center;
        }
        
        .tap-begin.revealed {
            opacity: 1;
            transform: translateY(0);
            animation: tapBlink 1s infinite, tapFloat 2s ease-in-out infinite;
        }
        
        @keyframes tapBlink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0.3; }
        }
        
        @keyframes tapFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCENE 2: SMASH BOX
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        #scene-smash {
            background: transparent;
        }
        
        .smash-title {
            font-family: 'Great Vibes', cursive;
            font-size: 2.5rem;
            color: var(--gold);
            text-shadow: 3px 3px 0 #000, 0 0 20px var(--gold), 0 0 40px var(--gold);
            margin-bottom: 0;
            animation: titleShimmer 3s ease-in-out infinite;
            text-align: center;
        }
        
        .smash-title-sub {
            font-family: 'Great Vibes', cursive;
            font-size: 1.8rem;
            color: var(--rage-red);
            text-shadow: 2px 2px 0 #000, 0 0 15px var(--rage-red);
            margin-bottom: 10px;
            text-align: center;
        }
        
        @keyframes titleShimmer {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }
        
        .smash-subtitle {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            color: #aaa;
            font-size: 1rem;
            margin-bottom: 30px;
            animation: subtitlePulse 1.5s ease-in-out infinite;
        }
        
        @keyframes subtitlePulse {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }
        
        .box-container {
            position: relative;
            width: 200px;
            height: 200px;
        }
        
        .gift-box-3d {
            width: 100%;
            height: 100%;
            position: relative;
            animation: boxFloat 2s ease-in-out infinite;
            cursor: pointer;
            transition: filter 0.2s;
        }
        
        .gift-box-3d:hover { filter: brightness(1.1); }
        
        @keyframes boxFloat {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }
        
        .gift-box-3d.shaking { animation: boxShake 0.08s infinite; }
        
        @keyframes boxShake {
            0%, 100% { transform: rotate(-8deg) scale(1.08); }
            50% { transform: rotate(8deg) scale(1.08); }
        }
        
        /* Wobble stages as anticipation builds */
        .gift-box-3d.wobble-1 { animation: boxWobble1 1.8s ease-in-out infinite; }
        .gift-box-3d.wobble-2 { animation: boxWobble2 1.5s ease-in-out infinite; }
        .gift-box-3d.wobble-3 { animation: boxWobble3 1.2s ease-in-out infinite; }
        
        @keyframes boxWobble1 {
            0%, 100% { transform: translateY(0) rotate(-3deg); }
            50% { transform: translateY(-12px) rotate(3deg); }
        }
        @keyframes boxWobble2 {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        @keyframes boxWobble3 {
            0%, 100% { transform: translateY(0) rotate(-7deg); }
            50% { transform: translateY(-8px) rotate(7deg); }
        }
        
        .box-main {
            width: 150px;
            height: 120px;
            background: linear-gradient(145deg, var(--rage-red) 0%, #8B0000 100%);
            border: 4px solid #5a0000;
            border-radius: 10px;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5), inset 0 -10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
            transition: all 0.1s ease;
        }
        
        .box-cracks {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .crack {
            position: absolute;
            background: rgba(0,0,0,0.8);
            transform-origin: center;
        }
        
        .crack-1 { width: 2px; height: 0; top: 20%; left: 30%; transform: rotate(45deg); transition: height 0.2s ease; }
        .crack-2 { width: 2px; height: 0; top: 40%; right: 25%; transform: rotate(-30deg); transition: height 0.2s ease; }
        .crack-3 { width: 0; height: 2px; bottom: 30%; left: 20%; transform: rotate(15deg); transition: width 0.2s ease; }
        .crack-4 { width: 2px; height: 0; top: 60%; left: 50%; transform: rotate(-60deg); transition: height 0.2s ease; }
        .crack-5 { width: 0; height: 2px; top: 35%; right: 40%; transform: rotate(-20deg); transition: width 0.2s ease; }
        
        .dent {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0.4) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .dent-1 { width: 30px; height: 20px; top: 25%; left: 20%; }
        .dent-2 { width: 25px; height: 18px; top: 50%; right: 15%; }
        .dent-3 { width: 35px; height: 22px; bottom: 20%; left: 40%; }
        
        .box-main::before {
            content: '';
            position: absolute;
            top: 0; left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 100%;
            background: linear-gradient(90deg, #e6c200, var(--gold), #e6c200);
            transition: all 0.2s ease;
        }
        
        .box-main::after {
            content: '';
            position: absolute;
            top: 10px; left: 10px;
            width: 25px; height: 25px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            filter: blur(5px);
        }
        
        .box-main.damage-1::before { transform: translateX(-50%) skewX(2deg); }
        .box-main.damage-2::before { transform: translateX(-50%) skewX(-3deg); width: 28px; }
        .box-main.damage-3::before { transform: translateX(-50%) skewX(5deg) skewY(2deg); width: 26px; }
        
        .box-lid {
            width: 170px;
            height: 40px;
            background: linear-gradient(180deg, #ff4444 0%, var(--rage-red) 100%);
            border: 4px solid #5a0000;
            border-radius: 8px 8px 0 0;
            position: absolute;
            bottom: 115px;
            left: 50%;
            transform: translateX(-50%);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .lid-cracks {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
        }
        
        .lid-crack {
            position: absolute;
            background: rgba(0,0,0,0.6);
        }
        
        .lid-crack-1 { width: 2px; height: 0; top: 10%; left: 25%; transform: rotate(30deg); transition: height 0.2s ease; }
        .lid-crack-2 { width: 0; height: 2px; top: 50%; right: 20%; transform: rotate(-15deg); transition: width 0.2s ease; }
        
        .box-lid::before {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 100%;
            background: linear-gradient(90deg, #e6c200, var(--gold), #e6c200);
            transition: all 0.2s ease;
        }
        
        .box-lid.damage-1 { transform: translateX(-50%) rotate(1deg); }
        .box-lid.damage-2 { transform: translateX(-50%) rotate(-2deg) translateY(-2px); }
        .box-lid.damage-3 { transform: translateX(-50%) rotate(3deg) translateY(-5px); }
        .box-lid.damage-3::before { transform: translate(-50%, -50%) skewX(5deg); }
        
        .explosion-pieces {
            position: absolute;
            top: 50%; left: 50%;
            width: 0; height: 0;
            pointer-events: none;
        }
        
        .explosion-piece { position: absolute; opacity: 0; }
        
        .piece-lid {
            width: 170px;
            height: 40px;
            background: linear-gradient(180deg, #ff4444 0%, var(--rage-red) 100%);
            border: 4px solid #5a0000;
            border-radius: 8px 8px 0 0;
        }
        
        .piece-shard {
            width: 30px;
            height: 40px;
            background: linear-gradient(145deg, var(--rage-red) 0%, #8B0000 100%);
            clip-path: polygon(0 0, 100% 20%, 80% 100%, 10% 80%);
        }
        
        .piece-ribbon {
            width: 8px;
            height: 50px;
            background: linear-gradient(90deg, #e6c200, var(--gold));
        }
        
        @keyframes pieceExplode {
            0% { opacity: 1; transform: translate(0, 0) rotate(0deg) scale(1); }
            100% { opacity: 0; transform: translate(var(--tx), var(--ty)) rotate(var(--rot)) scale(0.3); }
        }
        
        .gift-box-3d.exploding .box-lid,
        .gift-box-3d.exploding .box-main,
        .gift-box-3d.exploding .bow {
            opacity: 0;
            transition: opacity 0.1s ease;
        }
        
        .bow {
            position: absolute;
            top: 55px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
            z-index: 10;
            filter: drop-shadow(0 3px 10px rgba(0,0,0,0.5));
            animation: bowBounce 1s ease-in-out infinite;
            transition: transform 0.2s ease;
        }
        
        .bow.damage-1 { transform: translateX(-50%) rotate(5deg); }
        .bow.damage-2 { transform: translateX(-50%) rotate(-8deg) translateX(3px); }
        .bow.damage-3 { transform: translateX(-50%) rotate(12deg) translateY(-3px); }
        
        @keyframes bowBounce {
            0%, 100% { transform: translateX(-50%) scale(1) rotate(-5deg); }
            50% { transform: translateX(-50%) scale(1.1) rotate(5deg); }
        }
        
        .floating-hammer {
            position: absolute;
            font-size: 3rem;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5));
            transition: transform 0.15s ease;
        }
        
        .floating-hammer.left { 
            top: 20px; left: -60px; 
            animation: hammerSmashLeft 1s ease-in-out infinite;
            transform-origin: bottom right;
        }
        
        .floating-hammer.right { 
            top: 20px; right: -60px; 
            transform: scaleX(-1); 
            animation: hammerSmashRight 1s ease-in-out infinite;
            animation-delay: 0.5s;
            transform-origin: bottom left;
        }
        
        .floating-hammer.left.swing { animation: hammerStrike 0.15s ease-out !important; }
        .floating-hammer.right.swing { animation: hammerStrikeRight 0.15s ease-out !important; }
        
        @keyframes hammerStrike {
            0% { transform: rotate(-20deg); }
            50% { transform: rotate(60deg) translateX(30px); }
            100% { transform: rotate(-20deg); }
        }
        
        @keyframes hammerStrikeRight {
            0% { transform: scaleX(-1) rotate(-20deg); }
            50% { transform: scaleX(-1) rotate(60deg) translateX(-30px); }
            100% { transform: scaleX(-1) rotate(-20deg); }
        }
        
        @keyframes hammerSmashLeft {
            0%, 100% { transform: translateY(0) rotate(-20deg); }
            50% { transform: translateY(-20px) rotate(30deg); }
        }
        
        @keyframes hammerSmashRight {
            0%, 100% { transform: scaleX(-1) translateY(0) rotate(-20deg); }
            50% { transform: scaleX(-1) translateY(-20px) rotate(30deg); }
        }
        
        .spotlight-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, transparent 0%, transparent 10%, rgba(0,0,0,0.9) 40%);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease;
            z-index: 5;
        }
        
        .spotlight-overlay.active { opacity: 1; }
        
        .hidden-envelope {
            position: absolute;
            opacity: 0;
            transform: scale(0) rotate(-20deg);
            transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 10;
        }
        
        .hidden-envelope.revealed {
            opacity: 1;
            transform: scale(1) rotate(0deg);
        }
        
        .mini-envelope {
            width: 180px;
            height: 120px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
            animation: envelopeFloat 2s ease-in-out infinite;
        }
        
        .mini-envelope:hover { transform: scale(1.05); }
        
        @keyframes envelopeFloat {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }
        
        .mini-envelope-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, var(--envelope-red) 0%, #8B0000 100%);
            border-radius: 8px;
            border: 3px solid #5a0000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4), 0 0 60px rgba(255,215,0,0.3);
        }
        
        .mini-envelope-flap {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 55%;
            background: linear-gradient(180deg, #ff4444 0%, var(--envelope-red) 100%);
            clip-path: polygon(0 0, 50% 100%, 100% 0);
            border: 3px solid #5a0000;
            transform-origin: top;
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .mini-envelope.opening .mini-envelope-flap {
            transform: rotateX(-180deg);
        }
        
        .mini-envelope-seal {
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.8rem;
            animation: sealBounce 1s ease-in-out infinite;
        }
        
        @keyframes sealBounce {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.2); }
        }
        
        .envelope-hint {
            margin-top: 30px;
            font-family: 'Poppins', sans-serif;
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--gold);
            text-shadow: 0 0 15px var(--gold);
            animation: hintPulse 1s ease-in-out infinite;
        }
        
        @keyframes hintPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
        }
        
        .smash-hint {
            margin-top: 20px;
            font-size: 0.9rem;
            color: #888;
            animation: hintBounce 2s ease-in-out infinite;
        }
        
        @keyframes hintBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCENE 3: CARD
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        #scene-card {
            background: transparent;
            padding: 15px;
            overflow-y: auto;
            perspective: 1500px;
        }
        
        .card-3d-container {
            position: relative;
            transform-style: preserve-3d;
            animation: cardUnfold 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        
        @keyframes cardUnfold {
            0% { transform: rotateX(-90deg) scale(0.8); opacity: 0; }
            40% { transform: rotateX(10deg) scale(1.02); opacity: 1; }
            70% { transform: rotateX(-5deg) scale(1); }
            100% { transform: rotateX(0deg) scale(1); opacity: 1; }
        }
        
        .card {
            background: linear-gradient(145deg, var(--paper-cream) 0%, #FFF5CC 100%);
            border-radius: 20px;
            padding: 22px 18px;
            position: relative;
            box-shadow: 0 25px 60px rgba(0,0,0,0.5), 0 0 0 5px var(--dark-green), 0 0 40px rgba(45, 90, 39, 0.3), inset 0 0 100px rgba(0,0,0,0.03);
            border: 5px solid var(--dark-green);
            max-width: 420px;
            width: 100%;
        }
        
        .card-corner {
            position: absolute;
            font-size: 1.5rem;
            animation: cornerBounce 2s ease-in-out infinite;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.2));
        }
        
        .card-corner.tl { top: 5px; left: 5px; }
        .card-corner.tr { top: 5px; right: 5px; animation-delay: 0.3s; }
        .card-corner.bl { bottom: 5px; left: 5px; animation-delay: 0.6s; }
        .card-corner.br { bottom: 5px; right: 5px; animation-delay: 0.9s; }
        
        @keyframes cornerBounce {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.25) rotate(15deg); }
        }
        
        .card-header { text-align: center; margin-bottom: 12px; }
        
        .characters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 8px;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .characters.revealed { animation: revealUp 0.6s ease-out forwards; }
        
        @keyframes revealUp {
            to { opacity: 1; transform: translateY(0); }
        }
        
        .character {
            font-size: 2.5rem;
            position: relative;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3));
        }
        
        .character:first-child { animation: grinchDance 1.5s ease-in-out infinite; }
        .character:last-child { animation: santaRage 1s ease-in-out infinite; }
        
        @keyframes grinchDance {
            0%, 100% { transform: translateY(0) rotate(-8deg); }
            50% { transform: translateY(-12px) rotate(8deg); }
        }
        
        @keyframes santaRage {
            0%, 100% { transform: translateY(0) rotate(5deg); }
            50% { transform: translateY(-15px) rotate(-5deg); }
        }
        
        .hammer {
            position: absolute;
            font-size: 1.2rem;
            top: -8px; right: -12px;
            animation: hammerSwing 0.4s ease-in-out infinite;
        }
        
        @keyframes hammerSwing {
            0%, 100% { transform: rotate(-30deg); }
            50% { transform: rotate(30deg); }
        }
        
        .card-title {
            font-family: 'Mountains of Christmas', cursive;
            font-size: 1.8rem;
            color: var(--rage-red);
            text-shadow: 2px 2px 0 var(--dark-green), 0 0 20px rgba(215, 38, 56, 0.3);
            opacity: 0;
            transform: scale(0.8);
        }
        
        .card-title.revealed { animation: titleReveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        
        @keyframes titleReveal {
            to { opacity: 1; transform: scale(1); }
        }
        
        .lights-row {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 6px;
            opacity: 0;
        }
        
        .lights-row.revealed { animation: revealUp 0.5s ease-out forwards; }
        
        .light {
            width: 8px; height: 8px;
            border-radius: 50%;
            animation: lightGlow 0.7s ease-in-out infinite;
        }
        
        .light:nth-child(1) { background: #ff0000; }
        .light:nth-child(2) { background: #00ff00; animation-delay: 0.1s; }
        .light:nth-child(3) { background: #ffff00; animation-delay: 0.2s; }
        .light:nth-child(4) { background: #0099ff; animation-delay: 0.3s; }
        .light:nth-child(5) { background: #ff00ff; animation-delay: 0.4s; }
        
        @keyframes lightGlow {
            0%, 100% { opacity: 1; box-shadow: 0 0 15px currentColor, 0 0 30px currentColor; transform: scale(1); }
            50% { opacity: 0.3; box-shadow: none; transform: scale(0.9); }
        }
        
        .message-box {
            background: white;
            border-radius: 10px;
            padding: 14px;
            margin: 12px 0;
            border: 2px dashed #aaa;
            position: relative;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.05), 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .message-box::before {
            content: 'ğŸ“';
            position: absolute;
            top: -12px; left: 10px;
            font-size: 1.5rem;
            transform: rotate(-15deg);
            animation: paperclipWobble 2s ease-in-out infinite;
        }
        
        @keyframes paperclipWobble {
            0%, 100% { transform: rotate(-15deg); }
            50% { transform: rotate(-10deg); }
        }
        
        .greeting {
            font-family: 'Poppins', sans-serif;
            font-weight: 800;
            font-size: 1.3rem;
            color: var(--dark-green);
            margin-bottom: 10px;
            opacity: 0;
            transform: translateX(-20px);
        }
        
        .greeting.revealed { animation: slideInLeft 0.6s ease-out forwards; }
        
        @keyframes slideInLeft {
            to { opacity: 1; transform: translateX(0); }
        }
        
        .message {
            font-size: 0.85rem;
            line-height: 1.65;
            color: #444;
        }
        
        .message p { 
            margin-bottom: 10px; 
            opacity: 0;
            transform: translateY(15px);
        }
        
        .message p.revealed { animation: paragraphReveal 0.6s ease-out forwards; }
        
        @keyframes paragraphReveal {
            to { opacity: 1; transform: translateY(0); }
        }
        
        .highlight {
            background: linear-gradient(180deg, transparent 50%, transparent 50%);
            padding: 0 3px;
            font-weight: 700;
            position: relative;
            display: inline;
        }
        
        .highlight::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 0;
            height: 50%;
            background: rgba(255,215,0,0.4);
            z-index: -1;
            transition: width 0.5s ease;
        }
        
        .highlight.draw::after { width: 100%; }
        
        .strikethrough {
            position: relative;
            opacity: 0.9;
        }
        
        .strikethrough::after {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 0;
            height: 2px;
            background: #666;
            transition: width 0.4s ease;
        }
        
        .strikethrough.strike::after { width: 100%; }
        
        .rage-text {
            color: var(--rage-red);
            font-weight: 800;
            font-size: 1rem;
            display: inline-block;
            opacity: 0;
            transform: scale(0.8);
        }
        
        .rage-text.revealed {
            opacity: 1;
            transform: scale(1);
            animation: rageShake 0.15s infinite;
        }
        
        @keyframes rageShake {
            0%, 100% { transform: translateX(0) rotate(0); }
            25% { transform: translateX(-2px) rotate(-1deg); }
            75% { transform: translateX(2px) rotate(1deg); }
        }
        
        .wax-seal-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 15px;
            opacity: 0;
            transform: scale(0);
        }
        
        .wax-seal-container.revealed { animation: sealReveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        
        @keyframes sealReveal {
            to { opacity: 1; transform: scale(1); }
        }
        
        .wax-seal {
            width: 80px;
            height: 80px;
            background: radial-gradient(circle at 30% 30%, #ff4444, var(--rage-red) 40%, #8B0000 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4), inset 0 -5px 15px rgba(0,0,0,0.3), inset 0 5px 10px rgba(255,255,255,0.2);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }
        
        .wax-seal::before {
            content: '';
            position: absolute;
            width: 120%;
            height: 120%;
            background: radial-gradient(ellipse at center, rgba(255,215,0,0.3) 0%, transparent 60%);
            animation: sealGlow 2s ease-in-out infinite;
        }
        
        @keyframes sealGlow {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        
        .wax-seal:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 12px 35px rgba(0,0,0,0.5), 0 0 30px rgba(255,215,0,0.4), inset 0 -5px 15px rgba(0,0,0,0.3), inset 0 5px 10px rgba(255,255,255,0.2);
        }
        
        .seal-hint {
            margin-top: 12px;
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 0.8rem;
            color: var(--dark-green);
            animation: hintPulse 1.5s ease-in-out infinite;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCENE 4: GIFT
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        #scene-gift {
            background: transparent;
        }
        
        .screen-flash {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: white;
            pointer-events: none;
            opacity: 0;
            z-index: 99;
        }
        
        .screen-flash.active { animation: flashBurst 0.5s ease-out; }
        
        @keyframes flashBurst {
            0% { opacity: 0.9; }
            100% { opacity: 0; }
        }
        
        .glass-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 100;
            opacity: 0;
        }
        
        .glass-overlay.cracking { animation: glassCrack 0.8s ease-out forwards; }
        
        @keyframes glassCrack {
            0% { opacity: 0; }
            10% { opacity: 1; }
            100% { opacity: 0; }
        }
        
        .glass-shard {
            position: absolute;
            background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.3) 100%);
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            opacity: 0;
        }
        
        .glass-overlay.cracking .glass-shard { animation: shardFall 0.8s ease-out forwards; }
        
        @keyframes shardFall {
            0% { opacity: 1; transform: translate(0, 0) rotate(0deg); }
            100% { opacity: 0; transform: translate(var(--tx), var(--ty)) rotate(var(--rot)); }
        }
        
        .gift-container {
            text-align: center;
            padding: 30px;
            position: relative;
            z-index: 10;
        }
        
        .gift-box-wrapper {
            position: relative;
            display: inline-block;
            margin-bottom: 25px;
        }
        
        .gift-sparkles {
            position: absolute;
            top: 50%; left: 50%;
            width: 250px; height: 250px;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        
        .sparkle {
            position: absolute;
            animation: sparkleFloat 3s ease-in-out infinite;
            filter: drop-shadow(0 0 5px currentColor);
        }
        
        @keyframes sparkleFloat {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.7; }
            50% { transform: translate(var(--mx), var(--my)) scale(1.3); opacity: 1; }
        }
        
        .gift-emoji {
            font-size: 7rem;
            animation: giftBounce 0.8s ease-in-out infinite;
            cursor: pointer;
            filter: drop-shadow(0 10px 30px rgba(255,215,0,0.4));
            opacity: 0;
            transform: scale(0);
        }
        
        .gift-emoji.revealed { animation: giftReveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards, giftBounce 0.8s ease-in-out 0.8s infinite; }
        
        @keyframes giftReveal {
            0% { opacity: 0; transform: scale(0) rotate(-180deg); }
            100% { opacity: 1; transform: scale(1) rotate(0deg); }
        }
        
        @keyframes giftBounce {
            0%, 100% { transform: translateY(0) rotate(-3deg); }
            50% { transform: translateY(-20px) rotate(3deg); }
        }
        
        .flying-ribbon {
            position: absolute;
            font-size: 2rem;
            opacity: 0;
            pointer-events: none;
        }
        
        .flying-ribbon.fly { animation: ribbonFly 1s ease-out forwards; }
        
        @keyframes ribbonFly {
            0% { opacity: 1; transform: translate(0, 0) rotate(0deg) scale(1); }
            100% { opacity: 0; transform: translate(var(--tx), var(--ty)) rotate(var(--rot)) scale(0.5); }
        }
        
        .gift-text {
            font-weight: 800;
            font-size: 1.4rem;
            color: white;
            text-shadow: 2px 2px 0 #000, 0 0 20px rgba(255,255,255,0.3);
            margin-bottom: 12px;
            opacity: 0;
            transform: translateY(30px);
        }
        
        .gift-text.revealed { animation: textReveal 0.6s ease-out forwards; }
        
        @keyframes textReveal {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .ragery-logo {
            font-weight: 900;
            font-size: 3rem;
            color: var(--gold);
            text-shadow: 4px 4px 0 var(--rage-red), 8px 8px 0 #000, 0 0 40px var(--gold);
            margin-bottom: 12px;
            letter-spacing: 3px;
            opacity: 0;
            transform: scale(3) translateY(-100px);
        }
        
        .ragery-logo.smash-in { animation: logoSmash 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards, logoPulse 2s ease-in-out 0.6s infinite; }
        
        @keyframes logoSmash {
            0% { opacity: 0; transform: scale(3) translateY(-100px); filter: blur(10px); }
            60% { opacity: 1; transform: scale(0.9) translateY(10px); filter: blur(0); }
            80% { transform: scale(1.05) translateY(-5px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        @keyframes logoPulse {
            0%, 100% { text-shadow: 4px 4px 0 var(--rage-red), 8px 8px 0 #000, 0 0 40px var(--gold); }
            50% { text-shadow: 4px 4px 0 var(--rage-red), 8px 8px 0 #000, 0 0 60px var(--gold), 0 0 80px var(--gold); }
        }
        
        .gift-description {
            font-size: 0.95rem;
            color: #bbb;
            max-width: 280px;
            margin: 0 auto 20px;
            line-height: 1.5;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .gift-description.revealed { animation: textReveal 0.6s ease-out forwards; }
        
        .book-btn {
            padding: 18px 45px;
            background: linear-gradient(135deg, var(--grinch-green), var(--dark-green));
            color: white;
            border: 4px solid var(--gold);
            border-radius: 20px;
            font-weight: 800;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 5px 25px rgba(76, 185, 68, 0.5), 0 0 30px rgba(255, 215, 0, 0.3);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
        }
        
        .book-btn.revealed { animation: btnReveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        
        .book-btn::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: btnShine 2s infinite 1s;
        }
        
        @keyframes btnReveal {
            0% { opacity: 0; transform: translateY(30px) scale(0.9); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        @keyframes btnShine {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }
        
        .book-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(76, 185, 68, 0.6), 0 0 50px rgba(255, 215, 0, 0.5);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCENE 5: BOOKING - DARK MODE COMPACT
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        #scene-booking {
            background: transparent;
            padding: 10px;
            overflow-y: auto;
        }
        
        .booking-card {
            background: rgba(20, 10, 10, 0.95);
            border: 2px solid var(--rage-red);
            border-radius: 15px;
            padding: 18px 15px;
            max-width: 380px;
            width: 100%;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6), 0 0 30px rgba(215, 38, 56, 0.2);
            animation: cardSlideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes cardSlideUp {
            0% { opacity: 0; transform: translateY(50px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .booking-header {
            text-align: center;
            margin-bottom: 15px;
        }
        
        .booking-emoji {
            font-size: 1.8rem;
            animation: emojiWiggle 2s ease-in-out infinite;
        }
        
        @keyframes emojiWiggle {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }
        
        .booking-title {
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--gold);
            text-shadow: 0 0 15px var(--gold);
            margin-top: 5px;
        }
        
        .booking-subtitle {
            font-size: 0.75rem;
            color: #888;
            margin-top: 3px;
        }
        
        .booking-warning {
            background: rgba(215,38,56,0.15);
            border: 1px solid var(--rage-red);
            border-radius: 8px;
            padding: 8px;
            margin-top: 10px;
            font-size: 0.7rem;
            color: var(--rage-red);
            font-weight: 700;
        }
        
        .form-section { margin-bottom: 12px; }
        
        .form-label {
            font-weight: 700;
            font-size: 0.8rem;
            color: var(--grinch-green);
            margin-bottom: 8px;
            display: block;
        }
        
        .date-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
        }
        
        .date-btn {
            padding: 8px 3px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            color: #ccc;
        }
        
        .date-btn:hover {
            transform: translateY(-2px);
            border-color: var(--grinch-green);
            box-shadow: 0 3px 10px rgba(76, 185, 68, 0.3);
        }
        
        .date-btn.selected {
            background: linear-gradient(135deg, var(--grinch-green), var(--dark-green));
            border-color: var(--grinch-green);
            color: white;
            box-shadow: 0 3px 15px rgba(76, 185, 68, 0.5);
        }
        
        .date-day { font-size: 0.5rem; font-weight: 700; text-transform: uppercase; }
        .date-num { font-weight: 800; font-size: 1rem; }
        .date-month { font-size: 0.45rem; opacity: 0.7; }
        
        #timeSection { display: none; }
        #timeSection.show {
            display: block;
            animation: fadeSlide 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes fadeSlide {
            0% { opacity: 0; transform: translateY(-15px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        .time-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
            max-height: 120px;
            overflow-y: auto;
        }
        
        .time-btn {
            padding: 8px 4px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            color: #ccc;
        }
        
        .time-btn:hover {
            border-color: var(--rage-red);
            background: rgba(215, 38, 56, 0.1);
        }
        
        .time-btn.selected {
            background: linear-gradient(135deg, var(--rage-red), #8B0000);
            border-color: var(--rage-red);
            color: white;
            box-shadow: 0 2px 10px rgba(215, 38, 56, 0.5);
        }
        
        .form-input {
            width: 100%;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 0.8rem;
            color: white;
            transition: all 0.3s ease;
        }
        
        .form-input::placeholder { color: #666; }
        
        .form-input:focus {
            outline: none;
            border-color: var(--grinch-green);
            box-shadow: 0 0 0 2px rgba(76, 185, 68, 0.2);
        }
        
        .ragery-link-section {
            text-align: center;
            margin: 12px 0;
        }
        
        .ragery-link {
            color: var(--gold);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.75rem;
            transition: all 0.3s ease;
        }
        
        .ragery-link:hover { text-shadow: 0 0 10px var(--gold); }
        
        .submit-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--rage-red), #8B0000);
            color: white;
            border: 2px solid var(--gold);
            border-radius: 12px;
            font-weight: 800;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 10px;
            box-shadow: 0 5px 20px rgba(215, 38, 56, 0.4);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }
        
        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: btnShine 2s infinite;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 25px rgba(215, 38, 56, 0.5);
        }
        
        .corner-restart {
            position: fixed;
            bottom: 15px;
            right: 15px;
            padding: 6px 10px;
            font-size: 0.6rem;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .corner-restart:hover {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCENE 6: REVIEW & SUCCESS (Two States)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        #scene-success {
            background: transparent;
            padding: 20px;
        }
        
        .review-card, .sent-card {
            text-align: center;
            max-width: 340px;
            width: 100%;
            position: relative;
            z-index: 10;
            background: rgba(20, 10, 10, 0.95);
            padding: 25px 20px;
            border-radius: 20px;
            border: 2px solid var(--gold);
            backdrop-filter: blur(10px);
            box-shadow: 0 15px 50px rgba(0,0,0,0.5), 0 0 40px rgba(255, 215, 0, 0.2);
            animation: cardSlideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .sent-card { display: none; }
        .review-card.hidden { display: none; }
        .sent-card.visible { display: block; }
        
        /* Review State */
        .review-emoji {
            font-size: 3rem;
            margin-bottom: 10px;
            animation: emojiWiggle 2s ease-in-out infinite;
        }
        
        .review-title {
            font-family: 'Poppins', sans-serif;
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--gold);
            text-shadow: 0 0 20px var(--gold);
            margin-bottom: 20px;
        }
        
        .review-details {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: left;
        }
        
        .review-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            color: #ddd;
            font-size: 0.9rem;
        }
        
        .review-item:last-child { margin-bottom: 0; }
        
        .review-item-icon {
            font-size: 1.1rem;
            width: 25px;
            text-align: center;
        }
        
        .review-item-value {
            font-weight: 600;
            color: white;
        }
        
        .send-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--grinch-green), var(--dark-green));
            color: white;
            border: 3px solid var(--gold);
            border-radius: 15px;
            font-weight: 800;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 5px 25px rgba(76, 185, 68, 0.5);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }
        
        .send-btn::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: btnShine 2s infinite;
        }
        
        .send-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 10px 35px rgba(76, 185, 68, 0.6);
        }
        
        .send-btn.sending {
            pointer-events: none;
            opacity: 0.7;
        }
        
        .go-back-btn {
            margin-top: 15px;
            background: none;
            border: none;
            color: #888;
            font-family: 'Poppins', sans-serif;
            font-size: 0.85rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .go-back-btn:hover { color: var(--gold); }
        
        /* Sent State */
        .sent-bow {
            font-size: 3rem;
            margin-bottom: 10px;
            animation: bowDance 1s ease-in-out infinite;
            filter: drop-shadow(0 0 15px rgba(255, 0, 0, 0.5));
        }
        
        @keyframes bowDance {
            0%, 100% { transform: rotate(-5deg) scale(1); }
            50% { transform: rotate(5deg) scale(1.1); }
        }
        
        .sent-title {
            font-family: 'Mountains of Christmas', cursive;
            font-weight: 700;
            font-size: 2.2rem;
            color: var(--gold);
            text-shadow: 3px 3px 0 var(--dark-green), 0 0 30px var(--gold);
            margin-bottom: 20px;
            animation: successBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes successBounce {
            0% { opacity: 0; transform: scale(0.5) translateY(-30px); }
            60% { transform: scale(1.1) translateY(0); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .sent-message {
            background: linear-gradient(135deg, rgba(215, 38, 56, 0.15) 0%, rgba(76, 185, 68, 0.15) 100%);
            border: 2px solid var(--gold);
            border-radius: 15px;
            padding: 20px 15px;
            margin-bottom: 20px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }
        
        .sent-message-main {
            font-size: 1.1rem;
            font-weight: 700;
            color: white;
            margin-bottom: 10px;
        }
        
        .sent-message-sub {
            font-size: 0.9rem;
            color: #bbb;
            line-height: 1.5;
        }
        
        .sent-footer {
            font-family: 'Permanent Marker', cursive;
            font-size: 1rem;
            color: var(--gold);
            line-height: 1.8;
            text-shadow: 1px 1px 0 #000;
            margin-bottom: 20px;
        }
        
        .replay-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, var(--rage-red), #8B0000);
            color: white;
            border: 2px solid var(--gold);
            border-radius: 25px;
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(215, 38, 56, 0.4);
        }
        
        .replay-btn:hover {
            background: linear-gradient(135deg, var(--grinch-green), var(--dark-green));
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(76, 185, 68, 0.5);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GLOBAL EFFECTS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .snow-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }
        
        .snowflake {
            position: absolute;
            color: white;
            animation: snowfall linear infinite;
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
        }
        
        @keyframes snowfall {
            0% { transform: translateY(-10px) translateX(0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(100vh) translateX(50px) rotate(360deg); opacity: 0; }
        }
        
        .confetti-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 10000;
        }
        
        .confetti {
            position: absolute;
            animation: confettiFall 3s ease-out forwards;
        }
        
        @keyframes confettiFall {
            0% { transform: translateY(-10px) rotate(0deg) scale(1); opacity: 1; }
            100% { transform: translateY(100vh) rotate(1080deg) scale(0.3); opacity: 0; }
        }
        
        .hit-particle {
            position: absolute;
            pointer-events: none;
            animation: particleBurst 0.6s ease-out forwards;
            z-index: 10001;
        }
        
        @keyframes particleBurst {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="transmission-loader" id="transmissionLoader">
        <div class="static-overlay"></div>
        <div class="transmission-text">INCOMING TRANSMISSION</div>
        <div class="transmission-bar">
            <div class="transmission-progress"></div>
        </div>
    </div>
    
    <div class="snow-container" id="snow"></div>
    <div class="confetti-container" id="confetti"></div>
    
    <div class="global-background">
        <div class="global-cyber-grid"></div>
        <div class="global-glow-orbs">
            <div class="global-orb red"></div>
            <div class="global-orb green"></div>
            <div class="global-orb gold"></div>
        </div>
        <div class="global-heartbeat"></div>
    </div>
    


    <!-- SCENE 1: INTRO -->
    <div class="scene active" id="scene-intro">
        <div class="heartbeat-overlay"></div>
        <div class="glow-orbs" id="glowOrbs">
            <div class="glow-orb red"></div>
            <div class="glow-orb green"></div>
            <div class="glow-orb gold"></div>
        </div>
        <div class="cyber-grid" id="cyberGrid"></div>
        <div class="intro-content" id="introContent">
            <div class="intro-decoration" id="introDecoration">ğŸ„ğŸ”¨ğŸ„</div>
            <div class="intro-subtitle" id="introSubtitle">Incoming Christmas Transmission For...</div>
            <div class="intro-name" id="introName"><span class="cursor"></span></div>
            <div class="tap-begin" id="tapBegin">[ TAP ANYWHERE TO BEGIN ]</div>
        </div>
    </div>

    <!-- SCENE 2: SMASH BOX -->
    <div class="scene" id="scene-smash">
        <div class="spotlight-overlay" id="spotlightOverlay"></div>
        <div class="smash-title scene-enter">Merry Christmas</div>
        <div class="smash-title-sub scene-enter scene-enter-delay-1">Ya Filthy Animal!</div>
        <div class="smash-subtitle scene-enter scene-enter-delay-1">ğŸ”¨ Smash Open ğŸ”¨</div>
        
        <div class="box-container scene-enter scene-enter-delay-2" id="boxContainer">
            <div class="gift-box-3d" id="giftBox3d">
                <div class="floating-hammer left" id="hammerLeft">ğŸ”¨</div>
                <div class="floating-hammer right" id="hammerRight">ğŸ”¨</div>
                <div class="bow" id="boxBow">ğŸ€</div>
                <div class="box-lid" id="boxLid">
                    <div class="lid-cracks">
                        <div class="lid-crack lid-crack-1"></div>
                        <div class="lid-crack lid-crack-2"></div>
                    </div>
                </div>
                <div class="box-main" id="boxMain">
                    <div class="box-cracks" id="boxCracks">
                        <div class="crack crack-1"></div>
                        <div class="crack crack-2"></div>
                        <div class="crack crack-3"></div>
                        <div class="crack crack-4"></div>
                        <div class="crack crack-5"></div>
                        <div class="dent dent-1"></div>
                        <div class="dent dent-2"></div>
                        <div class="dent dent-3"></div>
                    </div>
                </div>
            </div>
            
            <div class="explosion-pieces" id="explosionPieces"></div>
            
            <div class="hidden-envelope" id="hiddenEnvelope">
                <div class="mini-envelope" id="miniEnvelope">
                    <div class="mini-envelope-body"></div>
                    <div class="mini-envelope-flap"></div>
                    <div class="mini-envelope-seal">ğŸ…</div>
                </div>
                <div class="envelope-hint">ğŸ‘† TAP TO OPEN!</div>
            </div>
        </div>
        
        <div class="smash-hint scene-enter scene-enter-delay-3" id="smashHint">ğŸ‘† Tap the box to smash it!</div>
    </div>

    <!-- SCENE 3: CARD -->
    <div class="scene" id="scene-card">
        <div class="card-3d-container">
            <div class="card" id="cardElement">
                <span class="card-corner tl">ğŸ„</span>
                <span class="card-corner tr">â­</span>
                <span class="card-corner bl">ğŸ</span>
                <span class="card-corner br">â„ï¸</span>
                
                <div class="card-header">
                    <div class="characters" id="cardCharacters">
                        <div class="character">ğŸ˜ˆ</div>
                        <div class="character">ğŸ…<span class="hammer">ğŸ”¨</span></div>
                    </div>
                    <h1 class="card-title" id="cardTitle">ğŸ„ Merry Christmas! ğŸ„</h1>
                    <div class="lights-row" id="lightsRow">
                        <div class="light"></div><div class="light"></div><div class="light"></div>
                        <div class="light"></div><div class="light"></div>
                    </div>
                </div>
                
                <div class="message-box">
                    <h2 class="greeting" id="cardGreeting">Dear Suraj, ğŸ‘‹</h2>
                    <div class="message" id="cardMessage">
                        <p id="p1">We survived another year of <span class="strikethrough">soul-crushing</span> <span class="highlight">character-building</span> corporate life. The meetings, the emails, the chaos. <span class="rage-text" id="rage1">THE AUDACITY OF IT ALL.</span></p>
                        <p id="p2">Through it all, <span class="highlight">you've been there.</span> Your positivity was a <span class="highlight">literal life saver</span> this year.</p>
                        <p id="p3">So this Christmas, we're doing something <span class="rage-text" id="rage2">THERAPEUTIC.</span></p>
                    </div>
                </div>
                
                <div class="wax-seal-container" id="waxSealContainer">
                    <div class="wax-seal" id="waxSeal" onclick="goToScene('scene-gift')">ğŸ</div>
                    <div class="seal-hint">Tap to reveal your gift!</div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCENE 4: GIFT -->
    <div class="scene" id="scene-gift">
        <div class="screen-flash" id="screenFlash"></div>
        <div class="glass-overlay" id="glassOverlay"></div>
        <div class="gift-container">
            <div class="gift-box-wrapper" id="giftBoxWrapper">
                <div class="gift-sparkles" id="giftSparkles"></div>
                <div class="gift-emoji" id="giftEmoji">ğŸ</div>
            </div>
            
            <div class="gift-text" id="giftText">YOUR GIFT: A Day of REAL Destruction at...</div>
            <div class="ragery-logo" id="rageryLogo">THE RAGERY! ğŸ’¥</div>
            <p class="gift-description" id="giftDescription">A Rage Room session with corporate workstations set up for us to destroy! ğŸ–¥ï¸ğŸ”¨</p>
            
            <button class="book-btn" id="bookBtn" onclick="goToScene('scene-booking')">ğŸ“… BOOK YOUR SESSION!</button>
        </div>
    </div>

    <!-- SCENE 5: BOOKING -->
    <div class="scene" id="scene-booking">
        <div class="booking-card">
            <div class="booking-header">
                <div class="booking-emoji">ğŸ„ğŸ“…ğŸ„</div>
                <h2 class="booking-title">LET PRIYA KNOW WHEN YOU'RE FREE</h2>
                
                <div class="booking-warning">âš ï¸ Need 2 days notice!</div>
            </div>
            
            <div id="bookingFormWrapper">
                <div class="form-section">
                    <label class="form-label">ğŸ—“ï¸ Pick Your Date:</label>
                    <div class="date-grid" id="dateGrid"></div>
                </div>
                
                <div class="form-section" id="timeSection">
                    <label class="form-label">â° Pick Your Time:</label>
                    <div class="time-grid" id="timeGrid"></div>
                </div>
                
                <div class="form-section">
                    <label class="form-label">ğŸ¯ What to destroy?</label>
                    <input type="text" class="form-input" id="rageTarget" placeholder="Printer, monitors, keyboards...">
                </div>
                
                <div class="form-section">
                    <label class="form-label">ğŸ’¬ Any comments?</label>
                    <input type="text" class="form-input" id="rageNotes" placeholder="Frustrations to share?">
                </div>
                
                <div class="ragery-link-section">
                    <a href="https://theragery.com/#offers" target="_blank" class="ragery-link">ğŸ”— Check out The Ragery â†’</a>
                </div>
                
                <button type="button" class="submit-btn" id="reviewBtn" onclick="showReview()">ğŸ”¨ LET'S RAGE! ğŸ”¨</button>
            </div>
        </div>
        <button class="corner-restart" onclick="replayExperience()">â†º Start Over</button>
    </div>

    <!-- SCENE 6: REVIEW & SUCCESS -->
    <div class="scene" id="scene-success">
        <!-- Review State -->
        <div class="review-card" id="reviewCard">
            <div class="review-emoji">ğŸ“¨</div>
            <h2 class="review-title">READY TO SEND?</h2>
            
            <div class="review-details">
                <div class="review-item">
                    <span class="review-item-icon">ğŸ“…</span>
                    <span class="review-item-value" id="reviewDate">â€”</span>
                </div>
                <div class="review-item">
                    <span class="review-item-icon">â°</span>
                    <span class="review-item-value" id="reviewTime">â€”</span>
                </div>
                <div class="review-item">
                    <span class="review-item-icon">ğŸ¯</span>
                    <span class="review-item-value" id="reviewTarget">â€”</span>
                </div>
                <div class="review-item">
                    <span class="review-item-icon">ğŸ’¬</span>
                    <span class="review-item-value" id="reviewNotes">â€”</span>
                </div>
            </div>
            
            <button class="send-btn" id="sendBtn" onclick="sendToPriya()">ğŸ“¬ SEND NOTE TO PRIYA</button>
            <button class="go-back-btn" onclick="goBackToEdit()">â† Go Back & Edit</button>
        </div>
        
        <!-- Sent State -->
        <div class="sent-card" id="sentCard">
            <div class="sent-bow">ğŸ€</div>
            <h2 class="sent-title">ğŸ„ SENT! ğŸ„</h2>
            
            <div class="sent-message">
                <div class="sent-message-main">âœ¨ Priya got your note! âœ¨</div>
                <div class="sent-message-sub">She'll book the session and send you a confirmation ğŸ“©</div>
            </div>
            
            <div class="sent-footer">
                Get ready to destroy corporate nightmares TOGETHER! ğŸ”¥<br><br>
                ğŸ„ Happy Holidays! ğŸ„<br><br>
                â€” Priya ğŸ’š
            </div>
            
            <button class="replay-btn" onclick="replayExperience()">â†º Experience Again</button>
        </div>
        <button class="corner-restart" onclick="replayExperience()">â†º Start Over</button>
    </div>

    <script>
        const scenes = ['scene-intro', 'scene-smash', 'scene-card', 'scene-gift', 'scene-booking', 'scene-success'];
        let currentSceneIndex = 0;
        let introStarted = false;
        
        // Form data
        let selectedDateValue = '';
        let selectedTimeValue = '';
        
        // Haptic feedback
        function haptic(type) {
            if (!navigator.vibrate) return;
            switch(type) {
                case 'light': navigator.vibrate(10); break;
                case 'medium': navigator.vibrate(40); break;
                case 'heavy': navigator.vibrate([50, 30, 80]); break;
                case 'explosion': navigator.vibrate([100, 50, 100, 50, 200]); break;
                case 'success': navigator.vibrate([30, 50, 30, 50, 100]); break;
            }
        }
        
        function goToScene(id) {
            const newIndex = scenes.indexOf(id);
            const currentScene = document.querySelector('.scene.active');
            
            if (currentScene) {
                currentScene.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
                currentScene.style.opacity = '0';
                currentScene.style.transform = 'scale(0.95)';
            }
            
            setTimeout(() => {
                document.querySelectorAll('.scene').forEach(s => {
                    s.classList.remove('active');
                    s.style.opacity = '';
                    s.style.transform = '';
                });
                
                document.getElementById(id).classList.add('active');
                currentSceneIndex = newIndex;
                
                if (id === 'scene-card') startCardReveal();
                if (id === 'scene-gift') triggerGiftReveal();
                
                haptic('medium');
            }, 400);
        }
        
        // Tap ripple
        document.addEventListener('click', function(e) {
            const ripple = document.createElement('div');
            ripple.className = 'tap-ripple';
            ripple.style.left = e.clientX + 'px';
            ripple.style.top = e.clientY + 'px';
            document.body.appendChild(ripple);
            setTimeout(() => ripple.remove(), 500);
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SCENE 1: INTRO
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function startIntroSequence() {
            if (introStarted) return;
            introStarted = true;
            
            setTimeout(() => document.getElementById('cyberGrid').classList.add('revealed'), 500);
            setTimeout(() => document.getElementById('glowOrbs').classList.add('revealed'), 1000);
            setTimeout(() => document.getElementById('introContent').classList.add('revealed'), 1500);
            setTimeout(() => { document.getElementById('introDecoration').classList.add('revealed'); haptic('light'); }, 1800);
            setTimeout(() => document.getElementById('introSubtitle').classList.add('revealed'), 2200);
            setTimeout(() => typewriterName(), 2800);
            setTimeout(() => document.getElementById('tapBegin').classList.add('revealed'), 5000);
        }
        
        function typewriterName() {
            const name = 'SURAJ';
            const container = document.getElementById('introName');
            container.innerHTML = '<span class="cursor"></span>';
            
            name.split('').forEach((letter, i) => {
                setTimeout(() => {
                    const cursor = container.querySelector('.cursor');
                    const span = document.createElement('span');
                    span.className = 'letter';
                    span.textContent = letter;
                    container.insertBefore(span, cursor);
                    
                    setTimeout(() => span.classList.add('typed'), 50);
                    haptic('light');
                    
                    if (i === name.length - 1) {
                        setTimeout(() => cursor.classList.add('hidden'), 500);
                    }
                }, i * 300);
            });
        }
        
        // Hide loader and start intro
        setTimeout(() => {
            document.getElementById('transmissionLoader').classList.add('hidden');
            startIntroSequence();
        }, 3500);
        
        let introClickable = false;
        setTimeout(() => { introClickable = true; }, 5000);
        
        document.getElementById('scene-intro').addEventListener('click', function() {
            if (!introClickable) return;
            goToScene('scene-smash');
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SCENE 2: SMASH BOX
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        let smashCount = 0;
        const smashTarget = 10;
        const giftBox3d = document.getElementById('giftBox3d');
        const boxMain = document.getElementById('boxMain');
        const boxLid = document.getElementById('boxLid');
        const boxBow = document.getElementById('boxBow');
        const hammerLeft = document.getElementById('hammerLeft');
        const hammerRight = document.getElementById('hammerRight');
        let lastHammer = 'right';
        
        function updateBoxDamage() {
            const progress = smashCount / smashTarget;
            
            document.querySelectorAll('.crack').forEach((crack, i) => {
                const threshold = (i + 1) * 0.15;
                if (progress >= threshold) {
                    if (crack.classList.contains('crack-1') || crack.classList.contains('crack-2') || crack.classList.contains('crack-4')) {
                        crack.style.height = Math.min(40, (progress - threshold) * 150) + 'px';
                    } else {
                        crack.style.width = Math.min(50, (progress - threshold) * 180) + 'px';
                    }
                }
            });
            
            document.querySelectorAll('.lid-crack').forEach((crack, i) => {
                const threshold = 0.3 + (i * 0.2);
                if (progress >= threshold) {
                    if (i === 0) crack.style.height = Math.min(25, (progress - threshold) * 80) + 'px';
                    else crack.style.width = Math.min(35, (progress - threshold) * 100) + 'px';
                }
            });
            
            document.querySelectorAll('.dent').forEach((dent, i) => {
                const threshold = 0.2 + (i * 0.25);
                if (progress >= threshold) dent.style.opacity = Math.min(1, (progress - threshold) * 3);
            });
            
            if (progress > 0.1) document.getElementById('boxCracks').style.opacity = '1';
            
            boxMain.classList.remove('damage-1', 'damage-2', 'damage-3');
            boxLid.classList.remove('damage-1', 'damage-2', 'damage-3');
            boxBow.classList.remove('damage-1', 'damage-2', 'damage-3');
            giftBox3d.classList.remove('wobble-1', 'wobble-2', 'wobble-3');
            
            if (progress >= 0.3 && progress < 0.6) {
                boxMain.classList.add('damage-1');
                boxLid.classList.add('damage-1');
                boxBow.classList.add('damage-1');
                giftBox3d.classList.add('wobble-1');
            } else if (progress >= 0.6 && progress < 0.85) {
                boxMain.classList.add('damage-2');
                boxLid.classList.add('damage-2');
                boxBow.classList.add('damage-2');
                giftBox3d.classList.add('wobble-2');
            } else if (progress >= 0.85) {
                boxMain.classList.add('damage-3');
                boxLid.classList.add('damage-3');
                boxBow.classList.add('damage-3');
                giftBox3d.classList.add('wobble-3');
            }
        }
        
        function swingHammer() {
            const hammer = lastHammer === 'left' ? hammerRight : hammerLeft;
            lastHammer = lastHammer === 'left' ? 'right' : 'left';
            hammer.classList.add('swing');
            setTimeout(() => hammer.classList.remove('swing'), 150);
        }
        
        function createExplosionPieces() {
            const container = document.getElementById('explosionPieces');
            container.innerHTML = '';
            
            const pieces = [
                { class: 'piece-lid', tx: -100, ty: -200, rot: -45 },
                { class: 'piece-shard', tx: 150, ty: -100, rot: 90 },
                { class: 'piece-shard', tx: -120, ty: 50, rot: -120 },
                { class: 'piece-shard', tx: 80, ty: 100, rot: 180 },
                { class: 'piece-ribbon', tx: -80, ty: -150, rot: 360 },
                { class: 'piece-ribbon', tx: 100, ty: -80, rot: -270 },
                { emoji: 'ğŸ€', tx: 0, ty: -250, rot: 720 }
            ];
            
            pieces.forEach((p, i) => {
                const piece = document.createElement('div');
                piece.className = 'explosion-piece ' + (p.class || '');
                if (p.emoji) {
                    piece.textContent = p.emoji;
                    piece.style.fontSize = '2rem';
                }
                piece.style.setProperty('--tx', p.tx + 'px');
                piece.style.setProperty('--ty', p.ty + 'px');
                piece.style.setProperty('--rot', p.rot + 'deg');
                piece.style.animation = `pieceExplode 0.8s ease-out ${i * 0.05}s forwards`;
                piece.style.opacity = '1';
                container.appendChild(piece);
            });
        }
        
        giftBox3d.addEventListener('click', function(e) {
            if (smashCount >= smashTarget) return;
            
            smashCount++;
            swingHammer();
            updateBoxDamage();
            
            this.classList.add('shaking');
            setTimeout(() => this.classList.remove('shaking'), 80);
            
            if (smashCount > 5) {
                document.body.classList.add('screen-shake');
                setTimeout(() => document.body.classList.remove('screen-shake'), 400);
            }
            
            haptic(smashCount > 7 ? 'heavy' : 'medium');
            createSmashParticle(e.clientX, e.clientY);
            
            if (smashCount >= smashTarget) {
                this.classList.add('exploding');
                document.getElementById('smashHint').style.display = 'none';
                createExplosionPieces();
                haptic('explosion');
                createConfetti(80);
                
                document.body.classList.add('screen-shake');
                setTimeout(() => document.body.classList.remove('screen-shake'), 500);
                
                setTimeout(() => {
                    giftBox3d.style.display = 'none';
                    document.getElementById('spotlightOverlay').classList.add('active');
                }, 500);
                
                setTimeout(() => {
                    document.getElementById('hiddenEnvelope').classList.add('revealed');
                }, 800);
            }
        });
        
        document.getElementById('miniEnvelope').addEventListener('click', function() {
            this.classList.add('opening');
            haptic('medium');
            createConfetti(30);
            setTimeout(() => goToScene('scene-card'), 700);
        });
        
        function createSmashParticle(x, y) {
            const particles = ['ğŸ’¥', 'âš¡', 'âœ¨', 'ğŸ”¥', 'ğŸ’«', 'â­', 'ğŸ’¢', 'ğŸŒŸ'];
            const count = 6 + Math.floor(smashCount / 2);
            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                p.className = 'hit-particle';
                p.textContent = particles[Math.floor(Math.random() * particles.length)];
                p.style.position = 'fixed';
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                p.style.fontSize = (1.5 + Math.random()) + 'rem';
                p.style.zIndex = '10001';
                p.style.setProperty('--tx', (Math.random() - 0.5) * 200 + 'px');
                p.style.setProperty('--ty', (Math.random() - 0.5) * 200 + 'px');
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 600);
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SCENE 3: CARD
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function startCardReveal() {
            const card = document.getElementById('cardElement');
            
            const timeline = [
                { el: 'cardCharacters', delay: 600, action: 'reveal' },
                { el: 'cardTitle', delay: 900, action: 'reveal' },
                { el: 'lightsRow', delay: 1100, action: 'reveal' },
                { el: 'cardGreeting', delay: 1400, action: 'reveal' },
                { el: 'p1', delay: 1800, action: 'reveal' },
                { el: 'rage1', delay: 2400, action: 'reveal', shake: true },
                { el: 'p2', delay: 3000, action: 'reveal' },
                { el: 'p3', delay: 3800, action: 'reveal' },
                { el: 'rage2', delay: 4200, action: 'reveal', shake: true },
                { el: 'waxSealContainer', delay: 4800, action: 'reveal' }
            ];
            
            // Auto-scroll as content reveals
            timeline.forEach(item => {
                setTimeout(() => {
                    const el = document.getElementById(item.el);
                    if (!el) return;
                    
                    el.classList.add('revealed');
                    
                    // Draw highlights
                    el.querySelectorAll('.highlight').forEach(hl => {
                        setTimeout(() => hl.classList.add('draw'), 200);
                    });
                    
                    // Strikethrough
                    el.querySelectorAll('.strikethrough').forEach(st => {
                        setTimeout(() => st.classList.add('strike'), 100);
                    });
                    
                    if (item.shake) {
                        document.body.classList.add('screen-shake');
                        setTimeout(() => document.body.classList.remove('screen-shake'), 400);
                        haptic('heavy');
                    } else {
                        haptic('light');
                    }
                    
                    // Scroll into view
                    el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, item.delay);
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SCENE 4: GIFT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        let giftTapCount = 0;
        
        function createGlassShards() {
            const overlay = document.getElementById('glassOverlay');
            overlay.innerHTML = '';
            
            for (let i = 0; i < 30; i++) {
                const shard = document.createElement('div');
                shard.className = 'glass-shard';
                shard.style.left = (30 + Math.random() * 40) + '%';
                shard.style.top = (30 + Math.random() * 40) + '%';
                shard.style.width = (10 + Math.random() * 30) + 'px';
                shard.style.height = (10 + Math.random() * 30) + 'px';
                shard.style.setProperty('--tx', (Math.random() - 0.5) * 400 + 'px');
                shard.style.setProperty('--ty', (Math.random() * 300 + 100) + 'px');
                shard.style.setProperty('--rot', (Math.random() * 720 - 360) + 'deg');
                shard.style.animationDelay = (Math.random() * 0.2) + 's';
                overlay.appendChild(shard);
            }
        }
        
        function createFlyingRibbons() {
            const wrapper = document.getElementById('giftBoxWrapper');
            const ribbons = ['ğŸ€', 'ğŸ—ï¸', 'âœ¨', 'â­'];
            
            for (let i = 0; i < 8; i++) {
                const ribbon = document.createElement('div');
                ribbon.className = 'flying-ribbon';
                ribbon.textContent = ribbons[Math.floor(Math.random() * ribbons.length)];
                ribbon.style.left = '50%';
                ribbon.style.top = '50%';
                ribbon.style.setProperty('--tx', (Math.random() - 0.5) * 300 + 'px');
                ribbon.style.setProperty('--ty', (Math.random() - 0.5) * 300 + 'px');
                ribbon.style.setProperty('--rot', (Math.random() * 720) + 'deg');
                wrapper.appendChild(ribbon);
                
                setTimeout(() => ribbon.classList.add('fly'), i * 50);
                setTimeout(() => ribbon.remove(), 1500);
            }
        }
        
        function initSparkles() {
            const container = document.getElementById('giftSparkles');
            container.innerHTML = '';
            const sparkles = ['âœ¨', 'â­', 'ğŸ’«', 'ğŸŒŸ', 'ğŸ’¥', 'âš¡'];
            for (let i = 0; i < 20; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle';
                s.textContent = sparkles[Math.floor(Math.random() * sparkles.length)];
                s.style.left = Math.random() * 100 + '%';
                s.style.top = Math.random() * 100 + '%';
                s.style.fontSize = (1 + Math.random()) + 'rem';
                s.style.setProperty('--mx', (Math.random() - 0.5) * 60 + 'px');
                s.style.setProperty('--my', (Math.random() - 0.5) * 60 + 'px');
                s.style.animationDelay = Math.random() * 3 + 's';
                container.appendChild(s);
            }
        }
        
        function triggerGiftReveal() {
            initSparkles();
            
            setTimeout(() => createFlyingRibbons(), 200);
            setTimeout(() => document.getElementById('giftEmoji').classList.add('revealed'), 400);
            setTimeout(() => document.getElementById('giftText').classList.add('revealed'), 800);
            setTimeout(() => {
                createGlassShards();
                document.getElementById('glassOverlay').classList.add('cracking');
                document.getElementById('screenFlash').classList.add('active');
                document.getElementById('rageryLogo').classList.add('smash-in');
                document.body.classList.add('screen-shake');
                setTimeout(() => document.body.classList.remove('screen-shake'), 500);
                haptic('explosion');
                createConfetti(100);
            }, 1200);
            setTimeout(() => document.getElementById('giftDescription').classList.add('revealed'), 2000);
            setTimeout(() => document.getElementById('bookBtn').classList.add('revealed'), 2400);
        }
        
        document.getElementById('giftEmoji').addEventListener('click', function() {
            giftTapCount++;
            this.style.animation = 'none';
            this.offsetHeight;
            this.style.animation = 'giftBounce 0.15s ease-in-out 5';
            
            if (giftTapCount === 5) {
                haptic('explosion');
                createConfetti(50);
            } else if (giftTapCount === 10) {
                haptic('explosion');
                createConfetti(100);
            } else {
                haptic('heavy');
                createConfetti(15 + giftTapCount * 3);
            }
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SCENE 5: BOOKING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const availability = {
            'Thu, Dec 25': ['4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM'],
            'Fri, Dec 26': ['4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '8:00 PM', '8:30 PM', '9:00 PM', '9:30 PM', '10:00 PM', '10:30 PM', '11:00 PM'],
            'Sat, Dec 27': ['12:00 PM', '12:30 PM', '1:00 PM', '1:30 PM', '2:00 PM', '2:30 PM', '3:00 PM', '3:30 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM', '9:30 PM', '10:00 PM', '10:30 PM', '11:00 PM'],
            'Sun, Dec 28': ['1:00 PM', '1:30 PM', '2:00 PM', '2:30 PM', '3:00 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM'],
            'Mon, Dec 29': ['4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM'],
            'Tue, Dec 30': ['4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM'],
            'Wed, Dec 31': ['4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM']
        };
        
        const dates = [
            { day: 'Thu', num: '25', month: 'Dec', full: 'Thu, Dec 25' },
            { day: 'Fri', num: '26', month: 'Dec', full: 'Fri, Dec 26' },
            { day: 'Sat', num: '27', month: 'Dec', full: 'Sat, Dec 27' },
            { day: 'Sun', num: '28', month: 'Dec', full: 'Sun, Dec 28' },
            { day: 'Mon', num: '29', month: 'Dec', full: 'Mon, Dec 29' },
            { day: 'Tue', num: '30', month: 'Dec', full: 'Tue, Dec 30' },
            { day: 'Wed', num: '31', month: 'Dec', full: 'Wed, Dec 31' }
        ];
        
        const dateGrid = document.getElementById('dateGrid');
        dates.forEach(function(d) {
            const btn = document.createElement('div');
            btn.className = 'date-btn';
            btn.innerHTML = '<div class="date-day">' + d.day + '</div><div class="date-num">' + d.num + '</div><div class="date-month">' + d.month + '</div>';
            btn.addEventListener('click', function() { selectDate(btn, d.full); });
            dateGrid.appendChild(btn);
        });
        
        function selectDate(btn, dateStr) {
            document.querySelectorAll('.date-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedDateValue = dateStr;
            
            const timeGrid = document.getElementById('timeGrid');
            timeGrid.innerHTML = '';
            availability[dateStr].forEach(function(time) {
                const tBtn = document.createElement('div');
                tBtn.className = 'time-btn';
                tBtn.textContent = time;
                tBtn.addEventListener('click', function() { selectTime(tBtn, time); });
                timeGrid.appendChild(tBtn);
            });
            document.getElementById('timeSection').classList.add('show');
            haptic('light');
        }
        
        function selectTime(btn, timeStr) {
            document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            selectedTimeValue = timeStr;
            haptic('light');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SCENE 6: REVIEW & SEND
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function showReview() {
            // Populate review details
            document.getElementById('reviewDate').textContent = selectedDateValue || '(not selected)';
            document.getElementById('reviewTime').textContent = selectedTimeValue || '(not selected)';
            document.getElementById('reviewTarget').textContent = document.getElementById('rageTarget').value || '(not specified)';
            document.getElementById('reviewNotes').textContent = document.getElementById('rageNotes').value || '(none)';
            
            // Reset states
            document.getElementById('reviewCard').classList.remove('hidden');
            document.getElementById('sentCard').classList.remove('visible');
            
            goToScene('scene-success');
        }
        
        function goBackToEdit() {
            goToScene('scene-booking');
        }
        
        function sendToPriya() {
            const sendBtn = document.getElementById('sendBtn');
            sendBtn.classList.add('sending');
            sendBtn.textContent = 'ğŸ“¤ SENDING...';
            
            // Prepare form data
            const formData = new FormData();
            formData.append('selected_date', selectedDateValue);
            formData.append('preferred_time', selectedTimeValue);
            formData.append('rage_target', document.getElementById('rageTarget').value);
            formData.append('notes', document.getElementById('rageNotes').value);
            formData.append('_subject', 'ğŸ„ğŸ’¥ Suraj picked a Ragery date!');
            formData.append('_captcha', 'false');
            formData.append('_template', 'box');
            
            // Send via fetch
            fetch('https://formsubmit.co/ajax/ppanchal1031@gmail.com', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Success! Show sent card
                showSentState();
            })
            .catch(error => {
                console.error('Error:', error);
                // Still show success (in case of CORS issues with FormSubmit)
                showSentState();
            });
        }
        
        function showSentState() {
            document.getElementById('reviewCard').classList.add('hidden');
            document.getElementById('sentCard').classList.add('visible');
            haptic('success');
            createConfetti(120);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // REPLAY
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function replayExperience() {
            smashCount = 0;
            introStarted = false;
            introClickable = false;
            lastHammer = 'right';
            giftTapCount = 0;
            selectedDateValue = '';
            selectedTimeValue = '';
            
            // Reset intro
            document.getElementById('cyberGrid').classList.remove('revealed');
            document.getElementById('glowOrbs').classList.remove('revealed');
            document.getElementById('introContent').classList.remove('revealed');
            document.getElementById('introDecoration').classList.remove('revealed');
            document.getElementById('introSubtitle').classList.remove('revealed');
            document.getElementById('introName').innerHTML = '<span class="cursor"></span>';
            document.getElementById('tapBegin').classList.remove('revealed');
            
            // Reset smash
            const giftBox = document.getElementById('giftBox3d');
            giftBox.style.display = '';
            giftBox.classList.remove('exploding', 'wobble-1', 'wobble-2', 'wobble-3');
            document.getElementById('boxMain').classList.remove('damage-1', 'damage-2', 'damage-3');
            document.getElementById('boxLid').classList.remove('damage-1', 'damage-2', 'damage-3');
            document.getElementById('boxBow').classList.remove('damage-1', 'damage-2', 'damage-3');
            document.getElementById('boxCracks').style.opacity = '0';
            document.querySelectorAll('.crack').forEach(c => { c.style.width = ''; c.style.height = ''; });
            document.querySelectorAll('.lid-crack').forEach(c => { c.style.width = ''; c.style.height = ''; });
            document.querySelectorAll('.dent').forEach(d => { d.style.opacity = '0'; });
            document.getElementById('smashHint').style.display = '';
            document.getElementById('spotlightOverlay').classList.remove('active');
            document.getElementById('hiddenEnvelope').classList.remove('revealed');
            document.getElementById('miniEnvelope').classList.remove('opening');
            document.getElementById('explosionPieces').innerHTML = '';
            
            // Reset card
            document.querySelectorAll('#scene-card .revealed').forEach(el => el.classList.remove('revealed'));
            document.querySelectorAll('#scene-card .draw').forEach(el => el.classList.remove('draw'));
            document.querySelectorAll('#scene-card .strike').forEach(el => el.classList.remove('strike'));
            
            // Reset gift
            document.getElementById('giftEmoji').classList.remove('revealed');
            document.getElementById('giftText').classList.remove('revealed');
            document.getElementById('rageryLogo').classList.remove('smash-in');
            document.getElementById('giftDescription').classList.remove('revealed');
            document.getElementById('bookBtn').classList.remove('revealed');
            document.getElementById('glassOverlay').classList.remove('cracking');
            document.getElementById('screenFlash').classList.remove('active');
            
            // Reset booking
            document.querySelectorAll('.date-btn').forEach(b => b.classList.remove('selected'));
            document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('selected'));
            document.getElementById('timeSection').classList.remove('show');
            document.getElementById('rageTarget').value = '';
            document.getElementById('rageNotes').value = '';
            
            // Reset success
            document.getElementById('reviewCard').classList.remove('hidden');
            document.getElementById('sentCard').classList.remove('visible');
            document.getElementById('sendBtn').classList.remove('sending');
            document.getElementById('sendBtn').textContent = 'ğŸ“¬ SEND NOTE TO PRIYA';
            
            goToScene('scene-intro');
            
            setTimeout(() => {
                startIntroSequence();
                setTimeout(() => { introClickable = true; }, 5000);
            }, 500);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // GLOBAL EFFECTS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function createSnow() {
            const container = document.getElementById('snow');
            const flakes = ['â„', 'â…', 'â†', 'âœ¦'];
            for (let i = 0; i < 50; i++) {
                const f = document.createElement('div');
                f.className = 'snowflake';
                f.textContent = flakes[Math.floor(Math.random() * flakes.length)];
                f.style.left = Math.random() * 100 + '%';
                f.style.fontSize = (0.5 + Math.random() * 1) + 'rem';
                f.style.opacity = 0.4 + Math.random() * 0.5;
                f.style.animationDuration = (5 + Math.random() * 5) + 's';
                f.style.animationDelay = Math.random() * 8 + 's';
                container.appendChild(f);
            }
        }
        
        function createConfetti(count) {
            const container = document.getElementById('confetti');
            const colors = ['#D72638', '#4CB944', '#FFD700', '#ff006e', '#00f5ff', '#8b00ff'];
            for (let i = 0; i < count; i++) {
                const c = document.createElement('div');
                c.className = 'confetti';
                c.style.left = Math.random() * 100 + '%';
                c.style.width = (8 + Math.random() * 8) + 'px';
                c.style.height = c.style.width;
                c.style.background = colors[Math.floor(Math.random() * colors.length)];
                c.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                c.style.animationDelay = Math.random() * 0.5 + 's';
                container.appendChild(c);
                setTimeout(() => c.remove(), 3500);
            }
        }
        
        createSnow();
    </script>
</body>
</html>
